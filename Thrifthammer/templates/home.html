{% extends "base.html" %}

{% block title %}Home{% endblock %}

{% block content %}
<section class="hero">
    <h1>Thrifthammer</h1>
    <p>Track prices on Warhammer kits across multiple retailers. Never overpay again.</p>
    <a href="{% url 'products:list' %}" class="btn btn-primary">Browse Products</a>
</section>

<section class="categories-section">
    <h2>Categories</h2>
    <div class="card-grid">
        {% for category in categories %}
        <a href="{% url 'products:list' %}?category={{ category.slug }}" class="card">
            <h3>{{ category.name }}</h3>
            <p>{{ category.description|truncatewords:15 }}</p>
        </a>
        {% empty %}
        <p>No categories yet. Add some in the admin panel.</p>
        {% endfor %}
    </div>
</section>

{% if recent_drops %}
<section class="recent-section">
    <h2>Recent Price Updates</h2>
    <div class="card-grid">
        {% for cp in recent_drops %}
        <a href="{% url 'products:detail' cp.product.slug %}" class="card">
            <h3>{{ cp.product.name }}</h3>
            <p class="price">${{ cp.price }}</p>
            <p class="retailer">{{ cp.retailer.name }}</p>
            {% if cp.discount_pct %}
            <span class="badge badge-green">{{ cp.discount_pct }}% off MSRP</span>
            {% endif %}
        </a>
        {% endfor %}
    </div>
</section>
{% endif %}
{% endblock %}
